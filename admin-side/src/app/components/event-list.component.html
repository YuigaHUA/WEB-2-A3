<div class="event-list-container">
  <div class="page-header">
    <h1>æ´»åŠ¨ç®¡ç†</h1>
    <p>ç®¡ç†æ‰€æœ‰æ…ˆå–„æ´»åŠ¨</p>
    <button class="btn-create" (click)="createNewEvent()">
      â• åˆ›å»ºæ–°æ´»åŠ¨
    </button>
  </div>

  <!-- åŠ è½½çŠ¶æ€ -->
  @if (loading) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>æ­£åœ¨åŠ è½½æ´»åŠ¨...</p>
    </div>
  }

  <!-- é”™è¯¯çŠ¶æ€ -->
  @if (error && !loading) {
    <div class="error-state">
      <div class="error-icon">âš ï¸</div>
      <h3>åŠ è½½å¤±è´¥</h3>
      <p>{{ error }}</p>
      <button class="btn-retry" (click)="loadEvents()">é‡æ–°åŠ è½½</button>
    </div>
  }

  <!-- ç©ºçŠ¶æ€ -->
  @if (!loading && !error && events.length === 0) {
    <div class="empty-state">
      <div class="empty-icon">ğŸ“…</div>
      <h3>æš‚æ— æ´»åŠ¨</h3>
      <p>è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•æ´»åŠ¨</p>
      <button class="btn-create" (click)="createNewEvent()">
        â• åˆ›å»ºç¬¬ä¸€ä¸ªæ´»åŠ¨
      </button>
    </div>
  }

  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  @if (!loading && !error && events.length > 0) {
    <div class="events-table">
      <table>
        <thead>
          <tr>
            <th>æ´»åŠ¨åç§°</th>
            <th>æ—¶é—´</th>
            <th>åœ°ç‚¹</th>
            <th>è´¹ç”¨</th>
            <th>æ³¨å†Œäººæ•°</th>
            <th>çŠ¶æ€</th>
            <th>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          @for (event of events; track event.eventId) {
            <tr>
              <td class="event-title">
                <strong>{{ event.title }}</strong>
                <br>
                <small>{{ event.categoryName }}</small>
              </td>
              <td>{{ formatDate(event.eventDate) }}</td>
              <td>{{ event.location }}</td>
              <td [class.free]="event.price === 0">
                {{ formatPrice(event.price) }}
              </td>
              <td>
                <span class="registration-badge">
                  {{ event.registrationCount }} äºº
                </span>
              </td>
              <td>
                @if (isUpcoming(event.eventDate)) {
                  <span class="status-badge upcoming">å³å°†å¼€å§‹</span>
                } @else {
                  <span class="status-badge ended">å·²ç»“æŸ</span>
                }
              </td>
              <td class="actions">
                <button class="btn-edit" (click)="editEvent(event.eventId)">
                  ç¼–è¾‘
                </button>
                <button class="btn-delete" (click)="deleteEvent(event.eventId)">
                  åˆ é™¤
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }

  <!-- è¿”å›ä»ªè¡¨æ¿ -->
  <div class="back-section">
    <a routerLink="/" class="btn-back">â† è¿”å›ä»ªè¡¨æ¿</a>
  </div>
</div>